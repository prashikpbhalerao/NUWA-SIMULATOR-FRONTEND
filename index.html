DOCTYPE html>  <html lang="en">

<head>    
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>NUWA AGI - Advanced AI Simulator</title>    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/libs/stats.min.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/DRACOLoader.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/simplex-noise.min.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/tsparticles-engine@2.3.4/tsparticles.engine.min.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/tsparticles-slim@2.3.4/tsparticles.slim.min.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/lucide@0.263.1/dist/umd/lucide.js"></script>    
    <script src="https://cdn.jsdelivr.net/npm/socket.io@4.7.2/client-dist/socket.io.min.js"></script>    
    
    <style>    <script>
const API_BASE = "https://nuwa-simulator-simulation-with-agi.onrender.com";

// Signup function
async function signup() {
  const username = document.getElementById("username").value;
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const res = await fetch(${API_BASE}/api/signup, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ username, email, password })
  });
  const data = await res.json();
  alert(JSON.stringify(data));
}

// Login function
async function login() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const res = await fetch(${API_BASE}/api/login, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, password })
  });
  const data = await res.json();
  localStorage.setItem("token", data.token);
  alert(JSON.stringify(data));
}

// Get user function
async function getUser() {
  const token = localStorage.getItem("token");
  const res = await fetch(${API_BASE}/api/me, {
    headers: { Authorization: Bearer ${token} }
  });
  const data = await res.json();
  alert(JSON.stringify(data));
}
</script>
        :root {    
            --primary: #238636;    
            --primary-glow: rgba(35, 134, 54, 0.5);    
            --danger: #da3633;    
            --dark: #0d1117;    
            --darker: #161b22;    
            --darkest: #010409;    
            --neural-glow-1: #238636;    
            --neural-glow-2: #2f81f7;    
            --neural-glow-3: #8957e5;    
            --text-primary: #f0f6fc;    
            --text-secondary: #c9d1d9;    
            --success: #3fb950;    
            --warning: #d29922;    
            --info: #58a6ff;    
            --radius: 8px;    
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);    
        }  * {    
        margin: 0;    
        padding: 0;    
        box-sizing: border-box;    
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;    
    }    body {    
    background: var(--darkest);    
    color: var(--text-primary);    
    overflow: hidden;    
    height: 100vh;    
    display: grid;    
    grid-template-columns: 280px 1fr 380px;    
    grid-template-rows: 60px 1fr 30px;    
    grid-template-areas:    
        "header header header"    
        "sidebar main panels"    
        "footer footer footer";    
}    
<body>
  <h2>NUWA Simulator Auth Test</h2>
  <input type="text" id="username" placeholder="Username"><br>
  <input type="email" id="email" placeholder="Email"><br>
  <input type="password" id="password" placeholder="Password"><br><br>

  <button onclick="signup()">Signup</button>
  <button onclick="login()">Login</button>
  <button onclick="getUser()">Get User</button>

  <!-- Yahin pe Code A (script) neeche aayega -->
</body>
/* Header Styles */    
.header {    
    grid-area: header;    
    background: var(--darker);    
    border-bottom: 1px solid #30363d;    
    padding: 0 20px;    
    display: flex;    
    align-items: center;    
    justify-content: space-between;    
    z-index: 100;    
}    

.logo {    
    display: flex;    
    align-items: center;    
    gap: 12px;    
    font-weight: 700;    
    font-size: 18px;    
}    

.logo-icon {    
    background: linear-gradient(135deg, var(--neural-glow-1), var(--neural-glow-2));    
    border-radius: 10px;    
    width: 36px;    
    height: 36px;    
    display: flex;    
    align-items: center;    
    justify-content: center;    
    position: relative;    
}    

.logo-icon::after {    
    content: '';    
    position: absolute;    
    inset: 0;    
    border-radius: 10px;    
    padding: 1px;    
    background: linear-gradient(135deg, var(--neural-glow-1), var(--neural-glow-3));    
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);    
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);    
    -webkit-mask-composite: xor;    
    mask-composite: exclude;    
}    

.header-actions {    
    display: flex;    
    align-items: center;    
    gap: 16px;    
}    

.system-status {    
    display: flex;    
    align-items: center;    
    gap: 8px;    
    font-size: 14px;    
    padding: 6px 12px;    
    background: var(--dark);    
    border-radius: var(--radius);    
    border: 1px solid #30363d;    
}    

.status-indicator {    
    width: 8px;    
    height: 8px;    
    border-radius: 50%;    
    background: var(--primary);    
    box-shadow: 0 0 0 2px var(--primary-glow);    
}    

.user-menu {    
    display: flex;    
    align-items: center;    
    gap: 12px;    
}    

.team-indicator {    
    background: var(--dark);    
    padding: 6px 12px;    
    border-radius: var(--radius);    
    font-size: 14px;    
    display: flex;    
    align-items: center;    
    gap: 6px;    
    border: 1px solid #30363d;    
}    

.user-avatar {    
    width: 36px;    
    height: 36px;    
    border-radius: 50%;    
    background: linear-gradient(135deg, #8957e5, #2f81f7);    
    display: flex;    
    align-items: center;    
    justify-content: center;    
    font-weight: 600;    
    cursor: pointer;    
    transition: var(--transition);    
}    

.user-avatar:hover {    
    transform: scale(1.05);    
    box-shadow: 0 0 0 2px var(--primary-glow);    
}    

/* Sidebar Styles */    
.sidebar {    
    grid-area: sidebar;    
    background: var(--dark);    
    border-right: 1px solid #30363d;    
    padding: 20px 0;    
    overflow-y: auto;    
}    

.nav-section {    
    margin-bottom: 24px;    
}    

.nav-title {    
    padding: 0 20px;    
    font-size: 12px;    
    text-transform: uppercase;    
    letter-spacing: 0.5px;    
    color: var(--text-secondary);    
    margin-bottom: 12px;    
    display: flex;    
    align-items: center;    
    justify-content: space-between;    
}    

.nav-item {    
    display: flex;    
    align-items: center;    
    gap: 12px;    
    padding: 10px 20px;    
    color: var(--text-secondary);    
    text-decoration: none;    
    transition: var(--transition);    
    position: relative;    
    cursor: pointer;    
}    

.nav-item:hover {    
    background: rgba(240, 246, 252, 0.08);    
    color: var(--text-primary);    
}    

.nav-item.active {    
    background: rgba(35, 134, 54, 0.15);    
    color: var(--text-primary);    
    border-right: 2px solid var(--primary);    
}    

.nav-item.active::before {    
    content: '';    
    position: absolute;    
    left: 0;    
    top: 0;    
    height: 100%;    
    width: 2px;    
    background: var(--primary);    
}    

.nav-icon {    
    width: 18px;    
    height: 18px;    
}    

/* Main Content Area */    
.main {    
    grid-area: main;    
    background: var(--darkest);    
    overflow: hidden;    
    position: relative;    
}    

.scene-container {    
    position: absolute;    
    top: 0;    
    left: 0;    
    width: 100%;    
    height: 100%;    
}    

.toolbar {    
    position: absolute;    
    top: 20px;    
    left: 50%;    
    transform: translateX(-50%);    
    background: rgba(22, 27, 34, 0.9);    
    backdrop-filter: blur(10px);    
    border: 1px solid #30363d;    
    border-radius: var(--radius);    
    padding: 8px;    
    display: flex;    
    gap: 6px;    
    z-index: 10;    
}    

.tool-button {    
    background: var(--dark);    
    border: 1px solid #30363d;    
    border-radius: 6px;    
    width: 36px;    
    height: 36px;    
    display: flex;    
    align-items: center;    
    justify-content: center;    
    cursor: pointer;    
    transition: var(--transition);    
    color: var(--text-secondary);    
}    

.tool-button:hover {    
    background: rgba(240, 246, 252, 0.12);    
    color: var(--text-primary);    
    border-color: #8b949e;    
}    

.tool-button.active {    
    background: var(--primary);    
    color: white;    
    border-color: var(--primary);    
}    

.view-controls {    
    position: absolute;    
    bottom: 20px;    
    right: 20px;    
    display: flex;    
    flex-direction: column;    
    gap: 8px;    
    z-index: 10;    
}    

.view-button {    
    background: rgba(22, 27, 34, 0.9);    
    backdrop-filter: blur(10px);    
    border: 1px solid #30363d;    
    border-radius: var(--radius);    
    width: 40px;    
    height: 40px;    
    display: flex;    
    align-items: center;    
    justify-content: center;    
    cursor: pointer;    
    transition: var(--transition);    
    color: var(--text-secondary);    
}    

.view-button:hover {    
    background: rgba(240, 246, 252, 0.12);    
    color: var(--text-primary);    
}    

/* Right Panel Styles */    
.panels {    
    grid-area: panels;    
    background: var(--darker);    
    border-left: 1px solid #30363d;    
    display: flex;    
    flex-direction: column;    
    overflow: hidden;    
}    

.panel-tabs {    
    display: flex;    
    background: var(--dark);    
    border-bottom: 1px solid #30363d;    
}    

.panel-tab {    
    padding: 12px 16px;    
    font-size: 14px;    
    color: var(--text-secondary);    
    cursor: pointer;    
    transition: var(--transition);    
    position: relative;    
}    

.panel-tab.active {    
    color: var(--text-primary);    
}    

.panel-tab.active::after {    
    content: '';    
    position: absolute;    
    bottom: -1px;    
    left: 0;    
    width: 100%;    
    height: 2px;    
    background: var(--primary);    
}    

.panel-content {    
    flex: 1;    
    overflow-y: auto;    
    padding: 16px;    
}    

.panel-section {    
    margin-bottom: 20px;    
}    

.panel-header {    
    display: flex;    
    align-items: center;    
    justify-content: space-between;    
    margin-bottom: 12px;    
}    

.panel-title {    
    font-size: 14px;    
    font-weight: 600;    
    color: var(--text-primary);    
}    

.panel-action {    
    color: var(--text-secondary);    
    cursor: pointer;    
    transition: var(--transition);    
}    

.panel-action:hover {    
    color: var(--text-primary);    
}    

.property-grid {    
    display: grid;    
    grid-template-columns: 1fr 2fr;    
    gap: 8px 12px;    
}    

.property-label {    
    font-size: 13px;    
    color: var(--text-secondary);    
    display: flex;    
    align-items: center;    
}    

.property-value {    
    font-size: 13px;    
    color: var(--text-primary);    
}    

.slider {    
    width: 100%;    
    height: 4px;    
    background: #30363d;    
    border-radius: 2px;    
    outline: none;    
    -webkit-appearance: none;    
}    

.slider::-webkit-slider-thumb {    
    -webkit-appearance: none;    
    width: 14px;    
    height: 14px;    
    border-radius: 50%;    
    background: var(--primary);    
    cursor: pointer;    
}    

.input-field {    
    background: var(--darkest);    
    border: 1px solid #30363d;    
    border-radius: var(--radius);    
    padding: 6px 10px;    
    color: var(--text-primary);    
    font-size: 13px;    
    width: 100%;    
}    

.input-field:focus {    
    outline: none;    
    border-color: var(--primary);    
}    

.button {    
    background: var(--primary);    
    color: white;    
    border: none;    
    border-radius: var(--radius);    
    padding: 8px 12px;    
    font-size: 13px;    
    cursor: pointer;    
    transition: var(--transition);    
    display: flex;    
    align-items: center;    
    justify-content: center;    
    gap: 6px;    
}    

.button:hover {    
    background: #2ea043;    
}    

.button-secondary {    
    background: var(--dark);    
    color: var(--text-primary);    
    border: 1px solid #30363d;    
}    

.button-secondary:hover {    
    background: rgba(240, 246, 252, 0.12);    
}    

.ai-engine-card {    
    background: var(--dark);    
    border: 1px solid #30363d;    
    border-radius: var(--radius);    
    padding: 12px;    
    margin-bottom: 12px;    
    cursor: pointer;    
    transition: var(--transition);    
}    

.ai-engine-card:hover {    
    border-color: var(--primary);    
}    

.ai-engine-card.active {    
    border-color: var(--primary);    
    background: rgba(35, 134, 54, 0.15);    
}    

.ai-engine-header {    
    display: flex;    
    align-items: center;    
    gap: 10px;    
    margin-bottom: 8px;    
}    

.ai-engine-icon {    
    width: 24px;    
    height: 24px;    
    border-radius: 6px;    
    background: linear-gradient(135deg, var(--neural-glow-1), var(--neural-glow-2));    
    display: flex;    
    align-items: center;    
    justify-content: center;    
}    

.ai-engine-title {    
    font-size: 14px;    
    font-weight: 600;    
    flex: 1;    
}    

.ai-engine-description {    
    font-size: 12px;    
    color: var(--text-secondary);    
    margin-bottom: 8px;    
}    

.ai-engine-stats {    
    display: flex;    
    gap: 12px;    
}    

.stat {    
    display: flex;    
    align-items: center;    
    gap: 4px;    
    font-size: 11px;    
    color: var(--text-secondary);    
}    

/* Footer Styles */    
.footer {    
    grid-area: footer;    
    background: var(--darker);    
    border-top: 1px solid #30363d;    
    display: flex;    
    align-items: center;    
    justify-content: space-between;    
    padding: 0 16px;    
    font-size: 12px;    
    color: var(--text-secondary);    
}    

.footer-status {    
    display: flex;    
    align-items: center;    
    gap: 8px;    
}    

.footer-actions {    
    display: flex;    
    align-items: center;    
    gap: 12px;    
}    

.footer-action {    
    cursor: pointer;    
    transition: var(--transition);    
}    

.footer-action:hover {    
    color: var(--text-primary);    
}    

/* Simulation Canvas */    
.simulation-canvas {    
    position: absolute;    
    top: 0;    
    left: 0;    
    width: 100%;    
    height: 100%;    
}    

/* Modal Styles */    
.modal-overlay {    
    position: fixed;    
    top: 0;    
    left: 0;    
    right: 0;    
    bottom: 0;    
    background: rgba(1, 4, 9, 0.8);    
    backdrop-filter: blur(4px);    
    display: flex;    
    align-items: center;    
    justify-content: center;    
    z-index: 1000;    
    opacity: 0;    
    pointer-events: none;    
    transition: opacity 0.3s ease;    
}    

.modal-overlay.active {    
    opacity: 1;    
    pointer-events: all;    
}    

.modal {    
    background: var(--dark);    
    border: 1px solid #30363d;    
    border-radius: 12px;    
    width: 90%;    
    max-width: 600px;    
    max-height: 80vh;    
    overflow: hidden;    
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);    
}    

.modal-header {    
    padding: 16px 20px;    
    border-bottom: 1px solid #30363d;    
    display: flex;    
    align-items: center;    
    justify-content: space-between;    
}    

.modal-title {    
    font-size: 16px;    
    font-weight: 600;    
}    

.modal-close {    
    color: var(--text-secondary);    
    cursor: pointer;    
    transition: var(--transition);    
}    

.modal-close:hover {    
    color: var(--text-primary);    
}    

.modal-body {    
    padding: 20px;    
    overflow-y: auto;    
}    

.modal-footer {    
    padding: 16px 20px;    
    border-top: 1px solid #30363d;    
    display: flex;    
    align-items: center;    
    justify-content: flex-end;    
    gap: 12px;    
}    

/* Notification System */    
.notifications {    
    position: fixed;    
    top: 20px;    
    right: 20px;    
    z-index: 1000;    
    display: flex;    
    flex-direction: column;    
    gap: 10px;    
}    

.notification {    
    background: var(--dark);    
    border: 1px solid #30363d;    
    border-radius: var(--radius);    
    padding: 12px 16px;    
    min-width: 300px;    
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);    
    display: flex;    
    align-items: flex-start;    
    gap: 12px;    
    transform: translateX(100%);    
    opacity: 0;    
    transition: all 0.3s ease;    
}    

.notification.show {    
    transform: translateX(0);    
    opacity: 1;    
}    

.notification-icon {    
    flex-shrink: 0;    
    width: 20px;    
    height: 20px;    
}    

.notification-content {    
    flex: 1;    
}    

.notification-title {    
    font-size: 14px;    
    font-weight: 600;    
    margin-bottom: 4px;    
}    

.notification-message {    
    font-size: 13px;    
    color: var(--text-secondary);    
}    

.notification-close {    
    color: var(--text-secondary);    
    cursor: pointer;    
    flex-shrink: 0;    
}    

.notification-success {    
    border-left: 3px solid var(--success);    
}    

.notification-error {    
    border-left: 3px solid var(--danger);    
}    

.notification-warning {    
    border-left: 3px solid var(--warning);    
}    

.notification-info {    
    border-left: 3px solid var(--info);    
}    

/* Context Menu */    
.context-menu {    
    position: fixed;    
    background: var(--dark);    
    border: 1px solid #30363d;    
    border-radius: var(--radius);    
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);    
    z-index: 1000;    
    min-width: 200px;    
    padding: 8px 0;    
    opacity: 0;    
    transform: scale(0.95);    
    transition: opacity 0.1s ease, transform 0.1s ease;    
    pointer-events: none;    
}    

.context-menu.visible {    
    opacity: 1;    
    transform: scale(1);    
    pointer-events: all;    
}    

.context-item {    
    padding: 8px 16px;    
    font-size: 13px;    
    color: var(--text-primary);    
    cursor: pointer;    
    transition: var(--transition);    
    display: flex;    
    align-items: center;    
    gap: 8px;    
}    

.context-item:hover {    
    background: rgba(240, 246, 252, 0.08);    
}    

.context-divider {    
    height: 1px;    
    background: #30363d;    
    margin: 4px 0;    
}    

/* Responsive Design */    
@media (max-width: 1200px) {    
    body {    
        grid-template-columns: 240px 1fr 320px;    
    }    
}    

@media (max-width: 992px) {    
    body {    
        grid-template-columns: 1fr;    
        grid-template-areas:    
            "header"    
            "main"    
            "footer";    
    }    

    .sidebar, .panels {    
        display: none;    
    }    

    .mobile-tabs {    
        display: flex;    
    }    
}    

/* Animation Keyframes */    
@keyframes pulse {    
    0% { opacity: 1; }    
    50% { opacity: 0.5; }    
    100% { opacity: 1; }    
}    

.pulse {    
    animation: pulse 2s infinite;    
}    

@keyframes spin {    
    0% { transform: rotate(0deg); }    
    100% { transform: rotate(360deg); }    
}    

.spin {    
    animation: spin 1s linear infinite;    
}    

/* Scrollbar Styles */    
::-webkit-scrollbar {    
    width: 8px;    
    height: 8px;    
}    

::-webkit-scrollbar-track {    
    background: var(--dark);    
}    

::-webkit-scrollbar-thumb {    
    background: #30363d;    
    border-radius: 4px;    
}    

::-webkit-scrollbar-thumb:hover {    
    background: #484f58;    
}

</style>  </head>    
<body>    
    <!-- Header Section -->    
    <header class="header">    
        <div class="logo">    
            <div class="logo-icon">ðŸ§ </div>    
            <span>NUWA AGI</span>    
        </div>    
        <div class="header-actions">    
            <div class="system-status">    
                <div class="status-indicator"></div>    
                <span>System: Operational</span>    
            </div>    
            <div class="user-menu">    
                <div class="team-indicator">    
                    <span>ðŸ‘¥ Team Alpha</span>    
                </div>    
                <div class="user-avatar">JD</div>    
            </div>    
        </div>    
    </header>  <!-- Sidebar Navigation -->    
<nav class="sidebar">    
    <div class="nav-section">    
        <div class="nav-title">Domains</div>    
        <div class="nav-item active">    
            <i class="nav-icon" data-lucide="layout-dashboard"></i>    
            <span>Dashboard</span>    
        </div>    
        <div class="nav-item">    
            <i class="nav-icon" data-lucide="building-2"></i>    
            <span>City Planning</span>    
        </div>    
        <div class="nav-item">    
            <i class="nav-icon" data-lucide="circuit-board"></i>    
            <span>Robotics</span>    
        </div>    
        <div class="nav-item">    
            <i class="nav-icon" data-lucide="cloud-rain"></i>    
            <span>Climate</span>    
        </div>    
        <div class="nav-item">    
            <i class="nav-icon" data-lucide="rocket"></i>    
            <span>Space Missions</span>    
        </div>    
        <div class="nav-item">    
            <i class="nav-icon" data-lucide="banknote"></i>    
            <span>Finance</span>    
        </div>    
    </div>    <div class="nav-section">    
    <div class="nav-title">Simulations</div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="play"></i>    
        <span>Current Projects</span>    
    </div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="folder"></i>    
        <span>Templates</span>    
    </div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="history"></i>    
        <span>History</span>    
    </div>    
</div>    

<div class="nav-section">    
    <div class="nav-title">Collaboration</div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="users"></i>    
        <span>Team Members</span>    
    </div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="message-square"></i>    
        <span>Chat</span>    
    </div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="share-2"></i>    
        <span>Shared Views</span>    
    </div>    
</div>    

<div class="nav-section">    
    <div class="nav-title">Administration</div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="settings"></i>    
        <span>Settings</span>    
    </div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="key"></i>    
        <span>API Keys</span>    
    </div>    
    <div class="nav-item">    
        <i class="nav-icon" data-lucide="credit-card"></i>    
        <span>Billing</span>    
    </div>    
</div>

</nav>    <!-- Main Content Area -->    <main class="main">    
    <div class="toolbar">    
        <div class="tool-button active" title="Select">    
            <i data-lucide="mouse-pointer"></i>    
        </div>    
        <div class="tool-button" title="Move">    
            <i data-lucide="move"></i>    
        </div>    
        <div class="tool-button" title="Rotate">    
            <i data-lucide="refresh-cw"></i>    
        </div>    
        <div class="tool-button" title="Scale">    
            <i data-lucide="maximize"></i>    
        </div>    
        <div class="tool-button" title="Create">    
            <i data-lucide="plus"></i>    
        </div>    
        <div class="tool-button" title="Delete">    
            <i data-lucide="trash-2"></i>    
        </div>    
    </div>    <div class="view-controls">    
    <div class="view-button" title="Top View">    
        <i data-lucide="arrow-up"></i>    
    </div>    
    <div class="view-button" title="Front View">    
        <i data-lucide="arrow-right"></i>    
    </div>    
    <div class="view-button" title="Left View">    
        <i data-lucide="arrow-left"></i>    
    </div>    
    <div class="view-button" title="Perspective">    
        <i data-lucide="box"></i>    
    </div>    
    <div class="view-button" title="Reset Camera">    
        <i data-lucide="refresh-ccw"></i>    
    </div>    
</div>    

<div class="scene-container">    
    <canvas class="simulation-canvas" id="renderCanvas"></canvas>    
</div>

</main>    <!-- Right Panel -->    <aside class="panels">    
    <div class="panel-tabs">    
        <div class="panel-tab active">Properties</div>    
        <div class="panel-tab">Layers</div>    
        <div class="panel-tab">AI Engines</div>    
        <div class="panel-tab">Assets</div>    
    </div>    <div class="panel-content">    
    <div class="panel-section">    
        <div class="panel-header">    
            <div class="panel-title">Simulation Properties</div>    
            <i class="panel-action" data-lucide="edit-3"></i>    
        </div>    
        <div class="property-grid">    
            <div class="property-label">Name</div>    
            <input type="text" class="input-field" value="Mars Colony 10K">    

            <div class="property-label">Status</div>    
            <div class="property-value">Running</div>    

            <div class="property-label">Progress</div>    
            <div class="property-value">    
                <div style="display: flex; align-items: center; gap: 8px;">    
                    <div style="flex: 1; height: 6px; background: #30363d; border-radius: 3px;">    
                        <div style="width: 65%; height: 100%; background: var(--primary); border-radius: 3px;"></div>    
                    </div>    
                    <span>65%</span>    
                </div>    
            </div>    

            <div class="property-label">Time Scale</div>    
            <input type="range" class="slider" min="0" max="10" step="0.1" value="1">    

            <div class="property-label">Physics Accuracy</div>    
            <input type="range" class="slider" min="0" max="100" value="95">    

            <div class="property-label">Energy Demand</div>    
            <div class="property-value">245 MW</div>    

            <div class="property-label">Oâ‚‚ Production</div>    
            <div class="property-value">98% Optimal</div>    

            <div class="property-label">Food Supply</div>    
            <div class="property-value">Sustainable</div>    
        </div>    
    </div>    

    <div class="panel-section">    
        <div class="panel-header">    
            <div class="panel-title">AI Engine Configuration</div>    
            <i class="panel-action" data-lucide="settings"></i>    
        </div>    

        <div class="ai-engine-card active">    
            <div class="ai-engine-header">    
                <div class="ai-engine-icon">    
                    <i data-lucide="building-2" width="14" height="14"></i>    
                </div>    
                <div class="ai-engine-title">Urban Planner AI</div>    
                <i data-lucide="activity" width="16" height="16" style="color: var(--success)"></i>    
            </div>    
            <div class="ai-engine-description">    
                Optimizes city layout for efficiency, sustainability, and growth potential.
</div>
<div class="ai-engine-stats">
<div class="stat">
<i data-lucide="cpu" width="12" height="12"></i>
<span>24% CPU</span>
</div>
<div class="stat">
<i data-lucide="memory-stick" width="12" height="12"></i>
<span>3.2GB RAM</span>
</div>
</div>
</div>

<div class="ai-engine-card">    
            <div class="ai-engine-header">    
                <div class="ai-engine-icon">    
                    <i data-lucide="leaf" width="14" height="14"></i>    
                </div>    
                <div class="ai-engine-title">Eco Balance AI</div>    
                <i data-lucide="activity" width="16" height="16" style="color: var(--success)"></i>    
            </div>    
            <div class="ai-engine-description">    
                Monitors and optimizes life support systems and ecological sustainability.    
            </div>    
            <div class="ai-engine-stats">    
                <div class="stat">    
                    <i data-lucide="cpu" width="12" height="12"></i>    
                    <span>18% CPU</span>    
                </div>    
                <div class="stat">    
                    <i data-lucide="memory-stick" width="12" height="12"></i>    
                    <span>2.7GB RAM</span>    
                </div>    
            </div>    
        </div>    

        <div class="ai-engine-card">    
            <div class="ai-engine-header">    
                <div class="ai-engine-icon">    
                    <i data-lucide="zap" width="14" height="14"></i>    
                </div>    
                <div class="ai-engine-title">Energy Grid AI</div>    
                <i data-lucide="activity" width="16" height="16" style="color: var(--success)"></i>    
            </div>    
            <div class="ai-engine-description">    
                Manages power distribution and renewable energy optimization.    
            </div>    
            <div class="ai-engine-stats">    
                <div class="stat">    
                    <i data-lucide="cpu" width="12" height="12"></i>    
                    <span>22% CPU</span>    
                </div>    
                <div class="stat">    
                    <i data-lucide="memory-stick" width="12" height="12"></i>    
                    <span>2.1GB RAM</span>    
                </div>    
            </div>    
        </div>    

        <button class="button" style="width: 100%; margin-top: 12px;">    
            <i data-lucide="plus"></i>    
            Add AI Engine    
        </button>    
    </div>    

    <div class="panel-section">    
        <div class="panel-header">    
            <div class="panel-title">Risk Assessment</div>    
            <i class="panel-action" data-lucide="alert-circle"></i>    
        </div>    

        <div style="background: rgba(218, 54, 51, 0.1); border: 1px solid rgba(218, 54, 51, 0.3); border-radius: var(--radius); padding: 12px; margin-bottom: 12px;">    
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">    
                <i data-lucide="alert-triangle" width="16" height="16" style="color: var(--danger)"></i>    
                <div style="font-size: 13px; font-weight: 600; color: var(--danger)">High Risk Detected</div>    
            </div>    
            <div style="font-size: 12px; color: var(--text-secondary)">    
                Dust storm season approaching. Energy production may drop by 40% for 72 hours.    
            </div>    
        </div>    

        <div style="background: rgba(209, 154, 34, 0.1); border: 1px solid rgba(209, 154, 34, 0.3); border-radius: var(--radius); padding: 12px;">    
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">    
                <i data-lucide="alert-circle" width="16" height="16" style="color: var(--warning)"></i>    
                <div style="font-size: 13px; font-weight: 600; color: var(--warning)">Moderate Risk</div>    
            </div>    
            <div style="font-size: 12px; color: var(--text-secondary)">    
                Water recycling system operating at 92% capacity. Consider expansion.    
            </div>    
        </div>    
    </div>    
</div>

</aside>    <!-- Footer -->    <footer class="footer">    
    <div class="footer-status">    
        <span>Simulation Time: 4.2 years</span>    
        <span>|</span>    
        <span>Population: 8,742</span>    
        <span>|</span>    
        <span>FPS: 60</span>    
    </div>    
    <div class="footer-actions">    
        <div class="footer-action">    
            <i data-lucide="save" width="14" height="14"></i>    
            <span>Save</span>    
        </div>    
        <span>|</span>    
        <div class="footer-action">    
            <i data-lucide="download" width="14" height="14"></i>    
            <span>Export</span>    
        </div>    
        <span>|</span>    
        <div class="footer-action" onclick="saveSimulation('My First Colony')">
    <i data-lucide="save" width="14" height="14"></i>
    <span>Save</span>
</div>
    </div>    
</footer>    <!-- Modals -->    <div class="modal-overlay" id="settingsModal">    
    <div class="modal">    
        <div class="modal-header">    
            <div class="modal-title">System Settings</div>    
            <i class="modal-close" data-lucide="x" onclick="closeModal('settingsModal')"></i>    
        </div>    
        <div class="modal-body">    
            <div class="panel-section">    
                <div class="panel-header">    
                    <div class="panel-title">Performance</div>    
                </div>    
                <div class="property-grid">    
                    <div class="property-label">Render Quality</div>    
                    <input type="range" class="slider" min="0" max="100" value="90">    <div class="property-label">Shadow Resolution</div>    
                <input type="range" class="slider" min="512" max="4096" step="512" value="2048">    

                <div class="property-label">Reflection Quality</div>    
                <input type="range" class="slider" min="0" max="100" value="85">    

                <div class="property-label">Physics Threads</div>    
                <input type="range" class="slider" min="1" max="16" value="8">    
            </div>    
        </div>    

        <div class="panel-section">    
            <div class="panel-header">    
                <div class="panel-title">Network</div>    
            </div>    
            <div class="property-grid">    
                <div class="property-label">Bandwidth Limit</div>    
                <input type="range" class="slider" min="10" max="1000" step="10" value="100">    

                <div class="property-label">Update Frequency</div>    
                <input type="range" class="slider" min="1" max="60" step="1" value="30">    
            </div>    
        </div>    
    </div>    
    <div class="modal-footer">    
        <button class="button button-secondary" onclick="closeModal('settingsModal')">Cancel</button>    
        <button class="button" onclick="saveSettings()">Save Changes</button>    
    </div>    
</div>

</div>    <!-- Notifications Container -->    <div class="notifications" id="notifications"></div>    <!-- Context Menu -->    <div class="context-menu" id="contextMenu">    
    <div class="context-item">    
        <i data-lucide="edit-2" width="14" height="14"></i>    
        <span>Edit</span>    
    </div>    
    <div class="context-item">    
        <i data-lucide="copy" width="14" height="14"></i>    
        <span>Duplicate</span>    
    </div>    
    <div class="context-item">    
        <i data-lucide="trash-2" width="14" height="14"></i>    
        <span>Delete</span>    
    </div>    
    <div class="context-divider"></div>    
    <div class="context-item">    
        <i data-lucide="maximize" width="14" height="14"></i>    
        <span>Focus View</span>    
    </div>    
    <div class="context-item">    
        <i data-lucide="settings" width="14" height="14"></i>    
        <span>Properties</span>    
    </div>    
</div>    <script>    
    // API Keys and Configuration    
    async function runAIEngine(engine, prompt) {
  try {
    const res = await fetch("/api/ai", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ engine, prompt })
    });

    const data = await res.json();
    console.log(`${engine} reply:`, data.reply);
  } catch (err) {
    console.error("Error:", err);
  }
}
   
    const SUBSCRIPTION_PLANS = {    
        basic: 141,    
        pro: 547,    
        team: 1254,    
        enterprise: 2457,    
        global: 3514,    
        unlimited: 5124    
    };    
  
    // Global State    
    let state = {    
        simulation: {    
            running: true,    
            timeScale: 1.0,    
            progress: 0.65,    
            metrics: {    
                population: 8742,    
                energy: 245,    
                oxygen: 98,    
                food: 100    
            }    
        },    
        aiEngines: {    
            urbanPlanner: { active: true, cpu: 24, ram: 3.2 },    
            ecoBalance: { active: false, cpu: 18, ram: 2.7 },    
            energyGrid: { active: false, cpu: 22, ram: 2.1 }    
        },    
        user: {    
            name: "John Doe",    
            team: "Team Alpha",    
            role: "admin",    
            subscription: "enterprise"    
        },    
        collaboration: {    
            onlineUsers: 12,    
            activeSession: true    
        }    
    };    
  
    // Initialize Three.js Scene    
    let scene, camera, renderer, controls;    
    let marsColony;    
  
    function initThreeJS() {    
        // Scene setup    
        scene = new THREE.Scene();    
        scene.background = new THREE.Color(0x0d1117);    
        scene.fog = new THREE.Fog(0x0d1117, 10, 50);    
  
        // Camera setup    
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);    
        camera.position.set(15, 10, 15);    
  
        // Renderer setup    
        const canvas = document.getElementById('renderCanvas');    
        renderer = new THREE.WebGLRenderer({ canvas, antialias: true });    
        renderer.setSize(window.innerWidth, window.innerHeight);    
        renderer.shadowMap.enabled = true;    
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;    
        renderer.outputEncoding = THREE.sRGBEncoding;    
        renderer.toneMapping = THREE.ACESFilmicToneMapping;    
        renderer.toneMappingExposure = 1.0;    
  
        // Controls    
        controls = new THREE.OrbitControls(camera, renderer.domElement);    
        controls.enableDamping = true;    
        controls.dampingFactor = 0.05;    
        controls.screenSpacePanning = false;    
        controls.minDistance = 5;    
        controls.maxDistance = 50;    
        controls.maxPolarAngle = Math.PI / 2;    
  
        // Lighting    
        const ambientLight = new THREE.AmbientLight(0x404040, 0.5);    
        scene.add(ambientLight);    
  
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);    
        directionalLight.position.set(10, 20, 10);    
        directionalLight.castShadow = true;    
        directionalLight.shadow.mapSize.width = 2048;    
        directionalLight.shadow.mapSize.height = 2048;    
        directionalLight.shadow.camera.near = 0.5;    
        directionalLight.shadow.camera.far = 50;    
        directionalLight.shadow.camera.left = -20;    
        directionalLight.shadow.camera.right = 20;    
        directionalLight.shadow.camera.top = 20;    
        directionalLight.shadow.camera.bottom = -20;    
        scene.add(directionalLight);    
  
        // Mars surface    
        const marsGeometry = new THREE.PlaneGeometry(100, 100, 50, 50);    
        const marsMaterial = new THREE.MeshStandardMaterial({    
            color: 0xa34c38,    
            roughness: 0.8,    
            metalness: 0.2    
        });    
        const mars = new THREE.Mesh(marsGeometry, marsMaterial);    
        mars.rotation.x = -Math.PI / 2;    
        mars.receiveShadow = true;    
        scene.add(mars);    
  
        // Add some terrain details    
        const noise = new SimplexNoise();    
        const positionAttribute = marsGeometry.getAttribute('position');    
        for (let i = 0; i < positionAttribute.count; i++) {    
            const x = positionAttribute.getX(i);    
            const y = positionAttribute.getY(i);    
            const z = positionAttribute.getZ(i);    
                
            const height = noise.noise3D(x * 0.1, y * 0.1, z * 0.1) * 0.8;    
            positionAttribute.setZ(i, height);    
        }    
        positionAttribute.needsUpdate = true;    
  
        // Create a simple Mars colony representation    
        createMarsColony();    
  
        // Handle window resize    
        window.addEventListener('resize', onWindowResize);    
  
        // Start animation loop    
        animate();    
    }    
  
    function createMarsColony() {    
        marsColony = new THREE.Group();    
  
        // Central dome    
        const domeGeometry = new THREE.SphereGeometry(4, 32, 16, 0, Math.PI * 2, 0, Math.PI / 2);    
        const domeMaterial = new THREE.MeshPhysicalMaterial({    
            color: 0x88ccff,    
            transmission: 0.8,    
            opacity: 0.3,    
            transparent: true,    
            roughness: 0.1,    
            metalness: 0.0,    
            clearcoat: 1.0,    
            clearcoatRoughness: 0.1    
        });    
        const dome = new THREE.Mesh(domeGeometry, domeMaterial);    
        dome.position.y = 4;    
        dome.rotation.x = Math.PI;    
        dome.castShadow = true;    
        dome.receiveShadow = true;    
        marsColony.add(dome);    
  
        // Dome base    
        const baseGeometry = new THREE.CylinderGeometry(4, 4, 0.5, 32);    
        const baseMaterial = new THREE.MeshStandardMaterial({ color: 0x555555, roughness: 0.7 });    
        const base = new THREE.Mesh(baseGeometry, baseMaterial);    
        base.position.y = 0.25;    
        base.receiveShadow = true;    
        marsColony.add(base);    
  
        // Solar panels    
        for (let i = 0; i < 8; i++) {    
            const angle = (i / 8) * Math.PI * 2;    
            const radius = 6;    
            const x = Math.cos(angle) * radius;    
            const z = Math.sin(angle) * radius;    
  
            const panelGroup = new THREE.Group();    
            panelGroup.position.set(x, 1, z);    
            panelGroup.rotation.y = -angle;    
  
            const panelGeometry = new THREE.BoxGeometry(3, 0.1, 1.5);    
            const panelMaterial = new THREE.MeshStandardMaterial({     
                color: 0x2244aa,     
                metalness: 0.8,     
                roughness: 0.2     
            });    
            const panel = new THREE.Mesh(panelGeometry, panelMaterial);    
            panel.position.y = 0.5;    
            panel.castShadow = true;    
            panel.receiveShadow = true;    
            panelGroup.add(panel);    
  
            const standGeometry = new THREE.BoxGeometry(0.1, 1, 0.1);    
            const standMaterial = new THREE.MeshStandardMaterial({ color: 0x888888 });    
            const stand = new THREE.Mesh(standGeometry, standMaterial);    
            stand.position.y = 0.5;    
            stand.castShadow = true;    
            panelGroup.add(stand);    
  
            marsColony.add(panelGroup);    
        }    
  
        // Habitation modules    
        for (let i = 0; i < 6; i++) {    
            const angle = (i / 6) * Math.PI * 2;    
            const radius = 3;    
            const x = Math.cos(angle) * radius;    
            const z = Math.sin(angle) * radius;    
  
            const moduleGeometry = new THREE.CylinderGeometry(1, 1, 2, 16);    
            const moduleMaterial = new THREE.MeshStandardMaterial({ color: 0xcccccc, roughness: 0.7 });    
            const module = new THREE.Mesh(moduleGeometry, moduleMaterial);    
            module.position.set(x, 1, z);    
            module.castShadow = true;    
            module.receiveShadow = true;    
            marsColony.add(module);    
  
            // Connector tunnels to central dome    
            const tunnelGeometry = new THREE.CylinderGeometry(0.3, 0.3, radius - 1, 8);    
            const tunnelMaterial = new THREE.MeshStandardMaterial({ color: 0x999999 });    
            const tunnel = new THREE.Mesh(tunnelGeometry, tunnelMaterial);    
            tunnel.position.set(x / 2, 1, z / 2);    
            tunnel.rotation.y = angle + Math.PI / 2;    
            tunnel.castShadow = true;    
            tunnel.receiveShadow = true;    
            marsColony.add(tunnel);    
        }    
  
        // Landing pad    
        const padGeometry = new THREE.CylinderGeometry(3, 3, 0.2, 32);    
        const padMaterial = new THREE.MeshStandardMaterial({ color: 0x333333, roughness: 0.9 });    
        const pad = new THREE.Mesh(padGeometry, padMaterial);    
        pad.position.set(10, 0.1, 0);    
        pad.receiveShadow = true;    
        marsColony.add(pad);    
  
        // Landing pad markings    
        const markingGeometry = new THREE.RingGeometry(2.8, 3, 32);    
        const markingMaterial = new THREE.MeshBasicMaterial({     
            color: 0xffffff,     
            side: THREE.DoubleSide,    
            transparent: true,    
            opacity: 0.8    
        });    
        const marking = new THREE.Mesh(markingGeometry, markingMaterial);    
        marking.rotation.x = -Math.PI / 2;    
        marking.position.set(10, 0.22, 0);    
        marsColony.add(marking);    
  
        scene.add(marsColony);    
    }    
  
    function onWindowResize() {    
        camera.aspect = window.innerWidth / window.innerHeight;    
        camera.updateProjectionMatrix();    
        renderer.setSize(window.innerWidth, window.innerHeight);    
    }    
  
    function animate() {    
        requestAnimationFrame(animate);    
  
        // Rotate solar panels slowly    
        if (marsColony) {    
            marsColony.children.forEach(child => {    
                if (child.type === 'Group') { // Solar panel groups    
                    child.rotation.y += 0.001;    
                }    
            });    
        }    
  
        controls.update();    
        renderer.render(scene, camera);    
    }    
  
    // Modal Functions    
    function openModal(id) {    
        document.getElementById(id).classList.add('active');    
    }    
  
    function closeModal(id) {    
        document.getElementById(id).classList.remove('active');    
    }    
  
    function saveSettings() {    
        showNotification('Settings saved successfully', 'success');    
        closeModal('settingsModal');    
    }    
  
    // Notification System    
    function showNotification(message, type = 'info', title = '') {    
        const notifications = document.getElementById('notifications');    
        const notification = document.createElement('div');    
        notification.className = `notification notification-${type}`;    
            
        let icon = 'info';    
        switch(type) {    
            case 'success': icon = 'check-circle'; break;    
            case 'error': icon = 'x-circle'; break;    
            case 'warning': icon = 'alert-triangle'; break;    
        }    
            
        notification.innerHTML = `    
            <i class="notification-icon" data-lucide="${icon}"></i>    
            <div class="notification-content">    
                ${title ? `<div class="notification-title">${title}</div>` : ''}    
                <div class="notification-message">${message}</div>    
            </div>    
            <i class="notification-close" data-lucide="x" onclick="this.parentElement.remove()"></i>    
        `;    
            
        notifications.appendChild(notification);    
            
        // Trigger reflow for animation    
        setTimeout(() => {    
            notification.classList.add('show');    
        }, 10);    
            
        // Auto remove after 5 seconds    
        setTimeout(() => {    
            if (notification.parentElement) {    
                notification.classList.remove('show');    
                setTimeout(() => notification.remove(), 300);    
            }    
        }, 5000);    
            
        // Initialize Lucide icons    
        lucide.createIcons();    
    }    
  
    // Context Menu    
    document.addEventListener('contextmenu', function(e) {    
        e.preventDefault();    
        const contextMenu = document.getElementById('contextMenu');    
        contextMenu.style.top = `${e.pageY}px`;    
        contextMenu.style.left = `${e.pageX}px`;    
        contextMenu.classList.add('visible');    
    });    
  
    document.addEventListener('click', function() {    
        const contextMenu = document.getElementById('contextMenu');    
        contextMenu.classList.remove('visible');    
    });    
  
  // AI Engine Integration
async function runAIEngine(engine, prompt) {
  showNotification(Initializing ${engine}..., 'info', 'AI Engine');
  
  const token = localStorage.getItem("token"); // Get the user's token

  if (!token) {
    showNotification('Authentication required to run AI engine.', 'error');
    return;
  }
  
  try {
    const response = await fetch(${API_BASE}/api/ai-chat, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': Bearer ${token} // Send the user's token
      },
      body: JSON.stringify({ engine, prompt })
    });

    const data = await response.json();
    
    if (response.ok) {
      showNotification(${engine} analysis completed, 'success', 'AI Engine');
      console.log(${engine} reply:, data.reply);
      return data.reply;
    } else {
      throw new Error(data.error || 'Unknown error');
    }
  } catch (error) {
    showNotification(AI Engine error: ${error.message}, 'error', 'AI Engine');
    console.error('AI Engine error:', error);
  }
}
  
    // Export Functions    
    function exportAsPDF() {    
        showNotification('Preparing PDF export...', 'info', 'Export');    
        // Simulate export process    
        setTimeout(() => {    
            showNotification('PDF exported successfully', 'success', 'Export');    
        }, 2000);    
    }    
  
    function exportAsCSV() {    
        showNotification('Preparing CSV export...', 'info', 'Export');    
        // Simulate export process    
        setTimeout(() => {    
            showNotification('CSV exported successfully', 'success', 'Export');    
        }, 1500);    
    }    
  
    function exportAs3DModel() {    
        showNotification('Preparing 3D model export...', 'info', 'Export');    
        // Simulate export process    
        setTimeout(() => {    
            showNotification('3D model exported successfully', 'success', 'Export');    
        }, 3000);    
    }    
  
    // Initialize the application    
    document.addEventListener('DOMContentLoaded', function() {    
        // Initialize Lucide icons    
        lucide.createIcons();    
            
        // Initialize Three.js    
        initThreeJS();    
            
        // Show welcome notification    
        setTimeout(() => {    
            showNotification('NUWA AGI system initialized. Mars Colony simulation loaded.', 'success', 'System Ready');    
        }, 1000);    
            
        // Simulate progress updates    
        setInterval(() => {    
            if (state.simulation.running) {    
                state.simulation.progress = Math.min(0.99, state.simulation.progress + 0.001);    
                state.simulation.metrics.population += Math.floor(Math.random() * 3);    
                    
                // Update progress bar    
                const progressBar = document.querySelector('.property-value div div');    
                if (progressBar) {    
                    progressBar.style.width = `${state.simulation.progress * 100}%`;    
                }    
                    
                // Update population count    
                const populationElement = document.querySelector('.footer-status span:nth-child(3)');    
                if (populationElement) {    
                    populationElement.textContent = `Population: ${state.simulation.metrics.population}`;    
                }    
            }    
        }, 3000);    
            
        // Simulate AI engine activity    
        setInterval(() => {    
            for (const engine in state.aiEngines) {    
                if (state.aiEngines[engine].active) {    
                    // Random fluctuations in resource usage    
                    state.aiEngines[engine].cpu += (Math.random() - 0.5) * 2;    
                    state.aiEngines[engine].cpu = Math.max(5, Math.min(40, state.aiEngines[engine].cpu));    
                        
                    state.aiEngines[engine].ram += (Math.random() - 0.5) * 0.2;    
                    state.aiEngines[engine].ram = Math.max(1, Math.min(5, state.aiEngines[engine].ram));    
                        
                    // Update UI    
                    const cpuElement = document.querySelector(`.ai-engine-card:nth-child(${    
                        engine === 'urbanPlanner' ? 1 : engine === 'ecoBalance' ? 2 : 3    
                    }) .stat:nth-child(1) span`);    
                    const ramElement = document.querySelector(`.ai-engine-card:nth-child(${    
                        engine === 'urbanPlanner' ? 1 : engine === 'ecoBalance' ? 2 : 3    
                    }) .stat:nth-child(2) span`);    
                        
                    if (cpuElement) {    
                        cpuElement.textContent = `${state.aiEngines[engine].cpu.toFixed(0)}% CPU`;    
                    }    
                    if (ramElement) {    
                        ramElement.textContent = `${state.aiEngines[engine].ram.toFixed(1)}GB RAM`;    
                    }    
                }    
            }    
        }, 5000);    
    });    
  
    // Team Collaboration Functions    
    function inviteUser(email, role = 'viewer') {    
        showNotification(`Invitation sent to ${email} as ${role}`, 'success', 'Team Collaboration');    
    }    
  
    function startCollaborationSession() {    
        state.collaboration.activeSession = true;    
        showNotification('Collaboration session started. Team members can now join.', 'success', 'Team Collaboration');    
    }    
  
    function shareSimulationView() {    
        showNotification('View sharing enabled. Link copied to clipboard.', 'success', 'Team Collaboration');    
    }    
  
    // Payment and Subscription Functions    
    function upgradeSubscription(plan) {    
        const amount = SUBSCRIPTION_PLANS[plan];    
        showNotification(`Upgrading to ${plan} plan for $${amount}...`, 'info', 'Subscription');    
            
        // Simulate payment processing    
        setTimeout(() => {    
            state.user.subscription = plan;    
            showNotification(`Successfully upgraded to ${plan} plan!`, 'success', 'Subscription');    
        }, 2000);    
    }    
  
    // Risk Assessment Functions    
    function calculateRiskScore() {    
        // Simulate risk calculation    
        const score = Math.floor(Math.random() * 100);    
        let level, color;    
            
        if (score < 30) {    
            level = 'Low';    
            color = 'var(--success)';    
        } else if (score < 70) {    
            level = 'Medium';    
            color = 'var(--warning)';    `
        } else {    
            level = 'High';    
            color = 'var(--danger)';    
        }    
            
        showNotification(`Risk assessment complete: ${level} risk (${score}/100)`,     
                        score < 30 ? 'success' : score < 70 ? 'warning' : 'error',     
                        'Risk Assessment');    
            
        return { score, level, color };    
    }    
  
    // Multi-domain AI Engine Examples    
    async function runCityPlanningAI() {    
        const prompt = "Analyze the current Mars colony layout and suggest improvements for scalability to 100,000 residents considering sustainability, transportation, and resource distribution.";    
        return await runAIEngine("Urban Planning", prompt);    
    }    
  
    async function runRoboticsAI() {    
        const prompt = "Design a robotic workforce system for maintaining life support systems in a Mars colony, considering redundancy, power requirements, and failure modes.";    
        return await runAIEngine("Robotics", prompt);    
    }    
  
    async function runClimateAI() {    
        const prompt = "Model the climate control systems needed to maintain Earth-like conditions in a Mars colony, accounting for external Martian environment factors and resource constraints.";    
        return await runAIEngine("Climate Science", prompt);    
    }    
  
    async function runSpaceMissionAI() {    
        const prompt = "Plan a resupply mission from Earth to Mars considering orbital mechanics, payload constraints, and launch windows for maximum efficiency.";    
        return await runAIEngine("Space Mission Planning", prompt);    
    }    
  
    async function runFinanceAI() {    
        const prompt = "Create a economic model for a self-sustaining Mars colony with both Earth-based and local resources, considering energy credits, resource allocation, and growth projections.";    
        return await runAIEngine("Financial Planning", prompt);    
    }    
</script> <script>
const API_BASE = "https://nuwa-simulator-simulation-with-agi.onrender.com";

// Signup function
async function signup() {
  const username = document.getElementById("username").value;
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const res = await fetch(`${API_BASE}/api/signup`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ username, email, password })
  });
  const data = await res.json();
  alert(JSON.stringify(data));
}

// Login function
async function login() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const res = await fetch(`${API_BASE}/api/login`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, password })
  });
  const data = await res.json();
  localStorage.setItem("token", data.token);
  alert(JSON.stringify(data));
}

// Get user function
async function getUser() {
  const token = localStorage.getItem("token");
  const res = await fetch(`${API_BASE}/api/me`, {
    headers: { Authorization: `Bearer ${token}` }
  });
  const data = await res.json();
  alert(JSON.stringify(data));
}
</script> const SimulationSchema = new mongoose.Schema({
  userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
  name: { type: String, required: true },
  data: { type: Object, required: true },
  createdAt: { type: Date, default: Date.now },
});

const Simulation = mongoose.model('Simulation', SimulationSchema);

// Route to save a simulation
app.post("/api/simulations/save", authenticateToken, async (req, res) => {
  try {
    const { name, data } = req.body;
    const userId = req.user.id; // User ID from the token

    if (!name || !data) {
      return res.status(400).json({ error: "Name and data are required." });
    }

    const simulation = new Simulation({ userId, name, data });
    await simulation.save();

    res.status(201).json({ message: "Simulation saved successfully!", simulationId: simulation._id });
  } catch (err) {
    res.status(500).json({ error: "Failed to save simulation.", details: err.message });
  }
});

// Route to get all saved simulations for a user
app.get("/api/simulations", authenticateToken, async (req, res) => {
  try {
    const userId = req.user.id;
    const simulations = await Simulation.find({ userId }).select('-data').sort({ createdAt: -1 });

    res.json(simulations);
  } catch (err) {
    res.status(500).json({ error: "Failed to fetch simulations.", details: err.message });
  }
});</body>    

</html> 








